import json
import os
import re

PROBLEMS_JSON = """[{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"The constructor being called isn't a const constructor.\\nTry removing 'const' from the constructor invocation.","severity":"error","startLine":313,"endLine":313},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"The constructor being called isn't a const constructor.\\nTry removing 'const' from the constructor invocation.","severity":"error","startLine":316,"endLine":316},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"The constructor being called isn't a const constructor.\\nTry removing 'const' from the constructor invocation.","severity":"error","startLine":319,"endLine":319},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"Invalid constant value.","severity":"error","startLine":386,"endLine":386},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"Expected to find '('.","severity":"error","startLine":386,"endLine":386},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"The class 'FontWeight' doesn't have a constant constructor 'bold'.\\nTry calling a different constructor.","severity":"error","startLine":386,"endLine":386},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"Invalid constant value.","severity":"error","startLine":393,"endLine":393},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"Invalid constant value.","severity":"error","startLine":414,"endLine":414},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"Unnecessary use of 'toList' in a spread.\\nTry removing the invocation of 'toList'.","severity":"info","startLine":261,"endLine":261},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":306,"endLine":306},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":311,"endLine":311},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":313,"endLine":313},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":316,"endLine":316},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":386,"endLine":386},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"Use 'const' with the constructor to improve performance.\\nTry adding the 'const' keyword to the constructor invocation.","severity":"info","startLine":390,"endLine":391},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":394,"endLine":394},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"Use 'const' with the constructor to improve performance.\\nTry adding the 'const' keyword to the constructor invocation.","severity":"info","startLine":397,"endLine":398},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":408,"endLine":408},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":413,"endLine":413},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":415,"endLine":415},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\course_browser\\\\course_browser_screen.dart","message":"Use 'const' with the constructor to improve performance.\\nTry adding the 'const' keyword to the constructor invocation.","severity":"info","startLine":462,"endLine":462},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\core\\\\logic\\\\exam_sync_logic.dart","message":"Statements in an if should be enclosed in a block.\\nTry wrapping the statement in a block.","severity":"info","startLine":132,"endLine":132},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\core\\\\logic\\\\exam_sync_logic.dart","message":"Statements in an if should be enclosed in a block.\\nTry wrapping the statement in a block.","severity":"info","startLine":136,"endLine":136},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\core\\\\logic\\\\exam_sync_logic.dart","message":"Statements in an if should be enclosed in a block.\\nTry wrapping the statement in a block.","severity":"info","startLine":138,"endLine":138},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\core\\\\logic\\\\exam_sync_logic.dart","message":"Statements in an if should be enclosed in a block.\\nTry wrapping the statement in a block.","severity":"info","startLine":142,"endLine":142},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\auth\\\\login_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":74,"endLine":74},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\auth\\\\register_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":116,"endLine":116},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\calendar\\\\semester_calendar_screen.dart","message":"Statements in an if should be enclosed in a block.\\nTry wrapping the statement in a block.","severity":"info","startLine":229,"endLine":229},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\calendar\\\\semester_calendar_screen.dart","message":"Statements in an if should be enclosed in a block.\\nTry wrapping the statement in a block.","severity":"info","startLine":233,"endLine":233},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\calendar\\\\semester_calendar_screen.dart","message":"Statements in an if should be enclosed in a block.\\nTry wrapping the statement in a block.","severity":"info","startLine":235,"endLine":235},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\calendar\\\\semester_calendar_screen.dart","message":"Statements in an if should be enclosed in a block.\\nTry wrapping the statement in a block.","severity":"info","startLine":239,"endLine":239},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\calendar\\\\semester_calendar_screen.dart","message":"Statements in an if should be enclosed in a block.\\nTry wrapping the statement in a block.","severity":"info","startLine":321,"endLine":321},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\calendar\\\\semester_calendar_screen.dart","message":"Statements in an if should be enclosed in a block.\\nTry wrapping the statement in a block.","severity":"info","startLine":323,"endLine":323},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\calendar\\\\semester_calendar_screen.dart","message":"Statements in an if should be enclosed in a block.\\nTry wrapping the statement in a block.","severity":"info","startLine":325,"endLine":325},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\dashboard\\\\dashboard_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":252,"endLine":252},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\dashboard\\\\dashboard_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":257,"endLine":257},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\dashboard\\\\dashboard_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":322,"endLine":322},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\dashboard\\\\dashboard_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":324,"endLine":324},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\dashboard\\\\dashboard_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":326,"endLine":326},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\dashboard\\\\dashboard_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":327,"endLine":327},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\dashboard\\\\dashboard_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":328,"endLine":328},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\onboarding\\\\program_selection_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":103,"endLine":103},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\results\\\\results_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":96,"endLine":96},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\results\\\\results_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":99,"endLine":99},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\results\\\\results_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":105,"endLine":105},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\results\\\\results_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":106,"endLine":106},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\results\\\\results_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":107,"endLine":107},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\results\\\\results_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":110,"endLine":110},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\semester_progress\\\\semester_progress_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":312,"endLine":312},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\semester_progress\\\\semester_progress_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":314,"endLine":314},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\semester_progress\\\\semester_progress_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":339,"endLine":339},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\semester_progress\\\\semester_progress_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":341,"endLine":341},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\semester_progress\\\\semester_progress_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":366,"endLine":366},{"path":"c:\\\\Users\\\\ibnea\\\\Downloads\\\\Mobile App\\\\Mobile App\\\\flutter_v2_new\\\\lib\\\\features\\\\semester_progress\\\\semester_progress_screen.dart","message":"Unnecessary 'const' keyword.\\nTry removing the keyword.","severity":"info","startLine":368,"endLine":368}]"""

problems = json.loads(PROBLEMS_JSON)

files = {}
for p in problems:
    path = p['path']
    if os.path.exists(path):
        if path not in files:
            files[path] = []
        files[path].append(p)

for path, issues in files.items():
    with open(path, 'r', encoding='utf-8') as f:
        lines = f.readlines()
    
    modified = False
    
    # Sort descending
    issues.sort(key=lambda x: x['startLine'], reverse=True)
    
    for issue in issues:
        msg = issue['message'].lower()
        if "unnecessary 'const'" in msg or "invalid constant" in msg or "isn't a const constructor" in msg or "constant constructor 'bold'" in msg:
            line_idx = issue['startLine'] - 1
            if line_idx >= len(lines): continue
            
            line = lines[line_idx]
            # Replace 'const ' with ''
            # To be safe, verify it has const
            if 'const ' in line:
                new_line = line.replace('const ', '', 1) # Replace first occurrence?
                lines[line_idx] = new_line
                modified = True
    
    if modified:
        with open(path, 'w', encoding='utf-8') as f:
            f.writelines(lines)
        print(f"Fixed const errors in {path}")
